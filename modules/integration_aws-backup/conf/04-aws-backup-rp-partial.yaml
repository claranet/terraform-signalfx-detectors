module: AWS Backup
name: recovery point partial
id: backup_rp_partial

transformation: ".min(over='1h')"
aggregation: true
filtering: "filter('namespace', 'AWS/Backup')"
value_unit: "count"

signals:
  failed:
    metric: NumberOfRecoveryPointsPartial
    extrapolation: zero
    rollup: sum
  signal:
    formula: failed
rules:
  minor:
    threshold: 0
    comparator: ">"
    lasting_duration: 2h
    lasting_at_least: 0.9
