module: redis
name: used over maximum memory ratio

filtering: "filter('plugin', 'redis_info')"

value_unit: "%"

signals:
  A:
    metric: bytes.used_memory
  B:
    metric: bytes.maxmemory
  signal:
    formula: (A/B).scale(100)

rules:
  critical:
    threshold: 95
    comparator: '>'
    lasting_duration: 10m
  major:
    threshold: 85
    comparator: '>'
    dependency: critical
    lasting_duration: 10m
