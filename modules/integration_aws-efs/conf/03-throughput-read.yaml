module: "AWS EFS"
name: "Percent of read throughput"
id: "read_throughput"
filtering: "filter('namespace', 'AWS/EFS')"
value_unit: "%"
condition: "var.read_throughput_detector_enabled"
signals:
  read:
    metric: "DataReadIOBytes"
    filter: "filter('stat', 'sum')"
  total:
    metric: "TotalIOBytes"
    filter: "filter('stat', 'sum')"
  signal:
    formula:
      (read/total).scale(100)
rules:
  critical:
    comparator: ">"
    threshold: 90
    lasting_duration: "15m"
  major:
    lasting_duration: "15m"
    comparator: ">"
    threshold: 80
    dependency: critical
