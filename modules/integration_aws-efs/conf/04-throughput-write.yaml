module: "AWS EFS"
name: "Percent of write throughput"
id: "write_throughput"
filtering: "filter('namespace', 'AWS/EFS')"
value_unit: "%"
condition: "var.write_throughput_detector_enabled"
signals:
  write:
    metric: "DataWriteIOBytes"
    filter: "filter('stat', 'sum')"
  total:
    metric: "TotalIOBytes"
    filter: "filter('stat', 'sum')"
  signal:
    formula:
      (write/total).scale(100)
rules:
  critical:
    comparator: ">"
    threshold: 90
    lasting_duration: "15m"
  major:
    comparator: ">"
    threshold: 80
    dependency: critical
    lasting_duration: "15m"
