module: system
name: "filesystem inodes utilization"
id: filesystem_inodes
transformation: ".max(over='5m')"
value_unit: "%"
signals:
  used:
    metric: system.filesystem.inodes.usage
    filter: "(filter('state', 'used') and not filter('type', 'squashfs'))"
  free:
    metric: system.filesystem.inodes.usage
    filter: "(filter('state', 'free') and not filter('type', 'squashfs'))"
  signal:
    formula: (used / (used + free) * 100)
rules:
  critical:
    threshold: 95
    comparator: ">"
  major:
    threshold: 90
    comparator: ">"
    dependency: critical
